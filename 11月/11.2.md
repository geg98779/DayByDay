## react hand-slice TrafficLight
```js
import { useState, useEffect, use } from "react"
import '../css/TrafficLight.css'

const TrafficLight = () => {
  const lightsConfig = [
    { color: 'red', duration: 5, flashDuration: 2 },
    { color: 'yellow', duration: 3, flashDuration: 1 },
    { color: 'green', duration: 5, flashDuration: 2 },
  ]

  const [currentLightIndex, setCurrentLightIndex] = useState(0)
  const [isActive, setIsActive] = useState(true)

  // 副作用钩子，负责计时逻辑和状态切换
  // 依赖项：currentLightIndex 变化时重新运行

  useEffect(() => {
    // 获取当前索引对应的灯光配置
    const current = lightsConfig[currentLightIndex]
    // 声明变量，用于存储闪烁定时器（setInterval）的句柄
    let flashInterval
    // 声明变量，用于存储主切换定时器（setTimeout）的句柄
    let nextLightTimer

    // 正常亮灯阶段的主计时器
    // 设置一个定时器，等待 current.duration 秒后执行回调函数
    nextLightTimer = setTimeout(() => {
      // 回调函数：到达稳定亮起时间后，开始处理闪烁阶段或直接切换

      // 检查当前灯光是否需要闪烁
      if (current.flashDuration > 0) {
        // 声明一个局部变量，用于追踪闪烁已经持续的时间
        let elapsed = 0
        // 启动闪烁定时器，每 500 毫秒（0.5秒）执行一次
        flashInterval = setInterval(() => {
          // 切换 isActive 状态，实现闪烁效果 (true -> false -> true)
          setIsActive(prev => !prev)
          // 累加已闪烁的时间
          elapsed += 0.5


          // 检查闪烁时间是否已达到配置的时长
          if (elapsed >= current.flashDuration) {
            // 闪烁结束，清除闪烁定时器，防止泄漏
            clearInterval(flashInterval)
            // 确保灯光在切换前是“亮起”状态 (或根据设计需求设置)
            setIsActive(true)
            // 切换到下一个灯光索引，并使用模运算实现循环
            setCurrentLightIndex(prev => (prev + 1) % lightsConfig.length)
          }
        }, 500)
      }
    }, current.duration * 1000) // 定时器等待时间：稳定亮起时长 (秒 * 1000ms)

    // useEffect 的清理函数：在组件卸载或依赖项变化前执行
    return () => {
      // 强制清除主切换定时器 (nextLightTimer)
      clearTimeout(nextLightTimer)
      // 强制清除可能正在运行的闪烁定时器 (flashInterval)
      // 这里的清除逻辑是正确的，避免了“过时闪烁”的逻辑错误
      clearInterval(flashInterval)
    }
  }, [currentLightIndex]) // 依赖项数组：只在 currentLightIndex 改变时重新运行 effect

  // 渲染部分
  return (
    // 交通灯的容器
    <div className="traffic-light">
      {/* 遍历 lightsConfig 数组，渲染每一个灯光 */}
      {lightsConfig.map((light, index) => (
        <div
          // 唯一 key，优化列表渲染
          key={light.color}
          // 动态 className
          className={`light ${light.color} ${
            // 激活条件：索引匹配 AND isActive 状态为 true
            index === currentLightIndex && isActive ? 'active' : ''
            }`}
        />
      ))}
    </div>
  )

}

export default TrafficLight
```