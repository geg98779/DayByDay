## hand-slice js
- 平衡二叉树
```ts
class TreeNode{
    public value: number
    public left: TreeNode | null
    public right: TreeNode | null

    constructor(value: number, left: TreeNode | null, right: TreeNode | null){
        this.value = value === undefined? 0 : value
        this.left = left === undefined? null : left
        this.right = right === undefined? null : right
    }
}

const judgeTree = (root: TreeNode : null) => {
    if(root === null) return true
    const maxDepth = (root: TreeNode | null) => {
        const recur = (root: TreeNode | null, count: number) => {
            if(root === null) return 0
            let left: number = recur(root.left, count + 1)
            let right: number = recur(root.right, count + 1)
            return Math.max(left, right) + 1
        }
        return recur(root,0)
    }

    let helpStack: TreeNode[] = []
    helpStack.push(root)

    while(helpStack.length){
        let cur = helpStack.pop()
        if(Math.abs(maxDepth(cur.left) - maxDepth(cur.right)) > 1){
            return false
        }

        if(cur.left) helpStack.push(cur.left)
        if(cur.right) helpStack.push(cur.right)
    }
    return true
}
```

- url实现query分割，输出对象
```ts
const url: string = "https://example.com/api?id=123&sort=time&isAdmin=undefined&tag=js&tag=css&search=%E5%AD%97%E7%AC%A6";

// 假设调用: getUrlParams(testUrl)

const getUrlParams = (url: string) => {
    let cur = url.split("?")[1]
    let curArr: string[] = cur.split("&")
    let res = new Map<string, string | boolean>()

    for(let item of curArr){
        console.log(item)
        let [key,value]: string[] = item.split("=")
        let fakeValue = decodeURIComponent(value)
        if(res.get(key)){
            let newres = res.get(key) as string
            res.set(key,newres.concat(value))
        }else{
            res.set(key,fakeValue === "undefined"? true : fakeValue)
        }
    }
    console.log(res,"res")
    return res
}
getUrlParams(url)
```

- 比较版本号
```js
const compareVersion = (version1, version2) => {
    const sion1 = version1.split(".")
    const sion2 = version2.split(".")
    const maxLength = Math.max(sion1.length, sion2.length)

    for(let i = 0; i < maxLength; i++){
        let num1 = parseInt(sion1[i] || "0");
        let num2 = parseInt(sion2[i] || "0");
        if(num1 > num2){
            return num1
        }else if(num1 < num2){
            return num2
        }else continue
    }
    return "Same"
}
```

- 下划线改驼峰
```js
const toCase = (str) => {
    let strArr = str.split("")
    for(let i = 0; i < strArr.length; i++){
        if(strArr[i] === '_'){
            strArr.splice(i,1)
            strArr[i] = strArr[i].toUpperCase()
        }
    }
    return strArr.join('')
}
```

- randomInt
```js
const randomInt = (min,max) => {
    let minNum = Math.ceil(min)
    let maxNum = Math.floor(max)
    return Math.floor(Math.random() * (maxNum - minNum + 1)) + minNum
}
```

- 手写时间格式化
```js
function formatDate(date) {
    // Correctly get the full year
    let year = date.getFullYear();

    // Correctly get the month (0-indexed, so add 1) and pad it
    let month = ('0' + (date.getMonth() + 1)).slice(-2);

    // Correctly get the day of the month and pad it
    let day = ('0' + date.getDate()).slice(-2);

    // Correctly get the hours and pad it
    let hours = ('0' + date.getHours()).slice(-2);

    // Correctly get the minutes and pad it
    let minutes = ('0' + date.getMinutes()).slice(-2);

    // Correctly get the seconds and pad it
    let seconds = ('0' + date.getSeconds()).slice(-2);

    // Correctly format the return string (YYYY-MM-DD HH:MM:SS)
    return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;
}

let date = new Date();
let formattedDate = formatDate(date);

console.log(formattedDate);
```

- instanceOf
```js
const instanceOf = (obj,pro) => {
    if(typeof obj !== 'object') return false
    if(typeof obj === null ) return false

    let proto = Object.getPrototypeof(obj)
    while(true){
        if(proto === null) return false
        if(proto === pro.prototype) return true
        proto = Object.getPrototypeof(proto)
    }
}
```