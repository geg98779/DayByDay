## 图片压缩
常见的图片格式有:BMP、PNG、JPEG、GIF、WebP、AVIF、HEIC 等。不同图片格式的压缩率相差较大，其中WebP、AVIF、HEIC均属于现代高压缩率图片格式
- 压缩效率 AVIF>HEIC>WEBP>PNG
- 从网上查阅的资料来说图像质量 png>avif>heic>webp

综合性能以及兼容性来说**webp**首定是最优的选择，基本上可以覆盖99%的移动端场景，但是从性能上来考虑avif也是一个不错的选择，兼容性也已经覆盖了绝大多数，heic相比于avif从性能上以及兼容性都不占优势因此排除

## 加载体验
1. 图片尺寸需合理 不然增加了网络消耗甚至某些设备对于过大的图片还会有性能问题
2. 图片格式 根据Google较早的测试，WebP 的无损压缩比网络上找到的 PNG 档少了45%的文件大小，即使这些PNG 档在使用 pngcrush 和 PNGOUT 处理过，WebP 还是可以减少28%的文件大小。所以最好还是使用webp 格式的图片
3. 懒加载 对页面加载速度影响最大的就是图片，一张普通的图片可以达到几 M 的大小，而代码也许就只有几十KB。对于图片过多的页面，为了加速页面加载速度，所以很多时候我们需要将页面内未出现在可视区域内的图片先不做加载， 等到滚动到可视区域后再去加载。这样子对于页面加载性能上会有很大的提升，也提高了用户体验。具体有两种实现方案:
- 一是可以在 img 标签上加上 lazy 属性，不过有些浏览器并不支持，需要做好降级处理
- 二是使用 js，当滚动到可视区域后再将对应的 img 标签加上 src 属性
4. 占位 在图片加载完成之前要有一个灰色的背景
5. 渐进式加载 图片渐进式加载需要先展示一个模糊的图片， 让用户有个预期，再等待完整的图片下载完成后替换成完整的图片

## 常见性能优化手段
[text](https://web.dev/articles/optimize-long-tasks?utm_source=devtools&hl=zh-cn)
主线程：一次只能处理一个任务 单线程 用时超过50ms的任务都是长任务，任务总时长减去50ms为任务的阻塞时段

- **长任务的问题：**
任务执行期间，浏览器都会阻止发生互动，因此第一个优化点就是**将长任务拆分为多个较小的任务**：
1. 软件架构方面：将工作拆分为更小的函数
2. 手动延迟代码执行
3. 专用让步 API：scheduler.yield() **scheduler.yield() 相较于其他让步方法的真正优势在于，它的延续会获得优先处理，这意味着如果您在任务中途让步，当前任务的延续会在任何其他类似任务开始之前运行**

- **打包工具**
1. 减少项目的打包体积
以webpack为例：
a	**CSS 抽取**	使用 mini-css-extract-plugin。	将 CSS 从 JS 中分离为单独的文件，减少单个文件大小，有效利用浏览器并行请求。
b	**资源压缩**	使用 optimize-css-assets-webpack-plugin 等。	有效压缩 JS 和 CSS 文件的大小。
c	**打包可视化与分析**	使用 webpack-bundle-analyzer。	可视化打包结果，分析每个文件大小及依赖，针对性优化（关注重复引用和是否可拆包）。
d	**组件懒加载**	使用 import() 进行异步引入。
e	**代码拆分 (SplitChunks)**	使用 splitChunks 配置。	将代码拆分成多个文件（替代默认将所有代码打包到入口文件的做法），有利于浏览器缓存和并发请求。
f	**摇树 (Tree Shaking)**	JS 在 ESM 下自动实现；CSS 使用 purifycss-webpack 或 purgecss。	移除项目中未被使用的死代码（Dead Code），包括 JS 和 CSS。

2. 提高项目的打包速度
a	**分析耗时**	speed-measure-webpack-plugin	分析 Loader 和 Plugin 的耗时，以便针对性优化，避免将时间浪费在性能差的插件上。
b	**优化模块解析**	resolve.modules 和 resolve.alias	1. 通过 resolve.modules 明确指定第三方模块的绝对路径（如 node_modules），减少不必要的逐层查找时间。 2. 通过 resolve.alias 设置路径别名，直接指定路径，减少查找过程。
c	**缓存打包结果**	hard-source-webpack-plugin	将打包结果缓存到硬盘中，大幅加速二次构建（特别是当 DLL 缓存不再流行时），使增量构建更快。
d	**多进程/多线程打包**	happyPack	开启多个进程并行处理 Loader 转换任务，将原本串行的 Loader 转换过程变为并行，显著提高大型项目的构建速度。（注意：该插件与 mini-css-extract-plugin 等部分插件可能不兼容）。