## promiseAllLimit
```js
function promiseAllLimit(limit) {
    return function (promiseFactories){
        let results = []
        let running = 0
        let completed = 0
        let index = 0
        return new Promise((resolve, reject) => {
            while(running < limit && index < promiseFactories.length){
                nextPromise()
            }

            function nextPromise() {
                if(completed >= promiseFactories.length){
                    resolve(result)
                    return
                }

                if(index >= promiseFactories.length){
                    return
                }

                let currentIndex = index
                let promiseFactory = promiseFactories[currentIndex]

                index++
                promiseFactory().then(result => {
                    results[currentIndex] = result
                    completed++
                    running--
                    if(completed >= promiseFactories.length){
                        resolve(results)
                    }else{
                        nextPromise()
                    }
                }).catch(error => {
                    reject(error)
                })

                running++
            }
        })
    }
}
```

## promise.all
```js
const myAll = (data) => {
    return new Promise((resolve, reject) => {
        let result = []
        let count = 0
        const addData = (item, index) => {
            result[index] = item
            count = count + 1
            if (count === data.length) {
                resolve(result)
            }
        }
        data.forEach((item, index) => {
            if (item instanceof Promise) {
                item.then((res) => {
                    addData(res, index)
                }, (err) => {
                    reject(err)
                })
            } else {
                addData(item, index)
            }
        })
    })
}
```