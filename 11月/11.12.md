## purgecss CSS Tree Shaking
通过正则匹配的方式，删除项目中未使用的css代码，从而减小最终打包后的体积。

然而，他只能识别静态类名，也就是说类名必须在编译阶段就能确定。因此，在项目中需要特别注意这些限制

### 工作原理
源码结构是一个典型的monorepo项目，由pnpm + lerna管理。其中我们重点关注的是 purge-from-tsx这个子包，因为它适用于TSX项目。

在主文件中引入了以下几个关键依赖：
1. acorn：将JavaScript代码转换为ast
2. acorn-jsx：用于解析jsx
3. acorn-walk 与 acorn-jsx-walk： 用于遍历ast，提取关键信息（如类名，id）

- 主函数逻辑
主函数返回一个接收jsx字符串的函数，它的作用是从jsx代码中提取出用于匹配的css选择器

核心逻辑使用walk.recursive递归遍历ast，其中重点处理以下节点：
1. JSXOpeningElement: 提取jsx元素的标签名作为选择器
2. JSXAttribute：提取id 和 className
3. JSXIdentifier： 提取基本标签名
4. JSXNamespacedName： 提取如<svg:path>这类带命名空间的标签
5. Literal： 提取字面量形式的类名，例如className="container"
这些信息就是最终提取出来的有效选择器

- CSS对比与剔除过程
提取jsx的选择器后，分析css文件
postcss插件解析css 将其转换成选择器集合，然后与jsx中提取出的选择器进行对比，判断哪些css是未使用的，最后将其移除。
另外，还支持配置白名单，防止特定的类名被误删，提升可控性和安全性

### 总结
1. 扫描jsx文件 构建一组实际使用的选择器集合
2. 解析css文件 通过postcss插件分析样式文件，将其中的选择器按类型分类
3. 比对选择器 将提取的实际使用选择器与css中的选择器进行对比，识别出未被使用的样式
4. 移除冗余css： 将未使用的css规则从最终样式文件中剔除，优化体积

