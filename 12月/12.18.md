## webpack loader
本质：Loader 是接收源文件内容、处理后返回新内容的 Node.js 函数，核心遵循「单一职责」（一个 Loader 只做一件事）、「链式执行」（从右到左）规则。
核心类型与返回规则
同步 Loader：直接返回处理后的字符串（如文本替换、添加注释）；
异步 Loader：调用 this.async() 获取回调，通过 callback(err, result) 异步返回结果（适合耗时操作）；
处理二进制内容：需开启 module.exports.raw = true，接收 / 返回 Buffer 类型。
关键上下文（this）
this.query：获取 Loader 配置参数；
this.async()：标记异步 Loader 并获取回调；
this.resourcePath：当前处理文件的绝对路径；
this.emitFile()：生成新文件（如处理静态资源时）。
开发步骤
编写函数：接收 source（源内容），按需求处理（如字符串替换、添加注释）；
配置引入：在 Webpack 的 module.rules 中通过 use 引入 Loader，可通过 options 传参；
测试验证：执行构建，检查输出文件是否符合处理预期。
核心技巧
链式执行：多个 Loader 按「从右到左」顺序执行；
缓存优化：Webpack 默认缓存 Loader 结果，可通过 this.cacheable(false) 关闭；
错误处理：同步 Loader 直接抛错，异步 Loader 通过 callback(err) 传递错误；
参数校验：可借助 schema-utils 校验配置参数合法性。
调试方式
基础调试：在 Loader 中添加 console.log 打印上下文 / 源内容；
高级调试：通过 webpack --debug 或 node --inspect 调试 Loader 执行流程。