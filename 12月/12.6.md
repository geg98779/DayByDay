## hand-slice publish-subscribe
```ts
type Listener = (...args: any[]) => void

class EventEmitter {
    private events: { [eventName: string]: Listener[] } = {}

    on(eventName: string, listener: Listener): void {
        if(!this.events[eventName]){
            this.events[eventName] = []
        }
        this.events[eventName].push(listener)
    }

    emit(eventName: string, ...args: any[]: void) {
        const listeners = this.events[eventName]
        if(listeners){
            listeners.forEach(listener => {
                listener(...args)
            })
        }
    }

    off(eventName: string, listener: Listener): void {
        const listeners = this.events[eventName]
        if(listeners){
            this.events[eventName] = listeners.filter(l => l !== listener)
        }
    }

    once(eventName: string, listener: Listener): void {
        cosnt onceWrapper: Listener = (...args: any[]) => {
            listener(...args)
            this.off(eventName, onceWrapper)
        }

        this.on(eventName, onceWrapper)
    }
}
```

## hand-slice new
```js
const new_ = function (fn, ...args) {
            let proto = Object.prototype.toString.call(fn)
            if (proto !== '[object Function]') throw "error in params"
            let obj = Object.create(fn.prototype)
            let res = fn.call(obj, ...args)

            return typeof res === 'object' ? res : obj
        }
```